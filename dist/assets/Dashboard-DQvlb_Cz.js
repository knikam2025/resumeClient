import{r as c,j as a}from"./index-7gVr3chR.js";const j=()=>{const[d,x]=c.useState(""),[s,p]=c.useState({layout:"creative",basicDetails:{name:"",email:"",phone:"",address:"",city:"",state:"",postalCode:"",introductoryParagraph:"",imageUrl:""},education:[{degreeName:"",institution:"",percentage:""}],experience:[{organizationName:"",position:"",CTC:"",technologies:""}],projects:[{projectTitle:"",teamSize:"",duration:"",description:""}],skills:[{skillName:"",perfection:""}],socialProfiles:[{platformName:"",profileLink:""}]}),[m,b]=c.useState(""),g="http://localhost:5000";c.useEffect(()=>{d&&p(e=>({...e,basicDetails:{...e.basicDetails,imageUrl:d}}))},[d]);const r=(e,t,l,n)=>{const{name:h,value:o}=e.target,u={...s};l!==void 0?u[t][l][n]=o:u[t][h]=o,p(u)},f=async e=>{const t=e.target.files[0],l=new FormData;l.append("image",t);try{const o=(await(await fetch(`${g}/api/users/upload`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:l})).json()).data.url;x(o),b(o)}catch(n){console.error("Error uploading image:",n)}},i=e=>{const t={...s};e==="education"?t.education.push({degreeName:"",institution:"",percentage:""}):e==="experience"?t.experience.push({organizationName:"",position:"",CTC:"",technologies:""}):e==="projects"?t.projects.push({projectTitle:"",teamSize:"",duration:"",description:""}):e==="skills"?t.skills.push({skillName:"",perfection:""}):e==="socialProfiles"&&t.socialProfiles.push({platformName:"",profileLink:""}),p(t)},y=async e=>{e.preventDefault();try{(await(await fetch(`${g}/api/v1/cv`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)})).json()).success?alert("CV submitted successfully"):alert("Error submitting CV")}catch(t){console.error("Error submitting CV:",t)}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"bg-gradient-to-r from-gray-200 via-gray-300 to-gray-500 p-6 rounded-lg shadow-lg w-full min-h-screen relative",style:{backgroundImage:"url('/rone.jpg')",backgroundSize:"cover",backgroundPosition:"center",width:"100%",backgroundRepeat:"no-repeat"},children:a.jsxs("div",{className:"bg-gradient-to-r from-gray-200 via-gray-300 to-gray-500 p-6 rounded-lg shadow-lg max-w-4xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"CV Builder"}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsx("div",{children:a.jsxs("h3",{className:"text-lg font-semibold",children:["Layout: ",s.layout]})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Basic Details"}),Object.keys(s.basicDetails).map(e=>a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsxs("label",{className:"flex-1 text-gray-700 pr-4 w-1/4",children:[e.charAt(0).toUpperCase()+e.slice(1),":"]}),a.jsx("input",{className:"flex-2 border border-gray-400 rounded-lg p-2 w-3/4",type:e==="email"?"email":"text",name:e,placeholder:`Enter your ${e}`,value:s.basicDetails[e],onChange:t=>r(t,"basicDetails"),required:e!=="address"&&e!=="city"&&e!=="state"&&e!=="postalCode"})]},e)),a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("label",{className:"block text-gray-700 w-1/4 pr-4",children:"Image:"}),a.jsxs("div",{className:"w-3/4 flex items-center",children:[a.jsx("input",{type:"file",onChange:f,accept:"image/*",className:"mb-4"}),m&&a.jsx("img",{src:m,alt:"Uploaded",className:"ml-4 w-24 h-24 object-cover rounded-full border border-gray-400"})]})]}),a.jsx("h3",{className:"text-lg font-semibold",children:"Education"}),s.education.map((e,t)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Degree Name",value:e.degreeName,onChange:l=>r(l,"education",t,"degreeName"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Institution",value:e.institution,onChange:l=>r(l,"education",t,"institution"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Percentage",value:e.percentage,onChange:l=>r(l,"education",t,"percentage"),className:"w-full border border-gray-400 rounded-lg p-2"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("education"),className:"bg-gray-600 text-white py-2 px-4 rounded-lg",children:"Add Education"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Experience"}),s.experience.map((e,t)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Organization Name",value:e.organizationName,onChange:l=>r(l,"experience",t,"organizationName"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Position",value:e.position,onChange:l=>r(l,"experience",t,"position"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"CTC",value:e.CTC,onChange:l=>r(l,"experience",t,"CTC"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Technologies",value:e.technologies,onChange:l=>r(l,"experience",t,"technologies"),className:"w-full border border-gray-400 rounded-lg p-2"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("experience"),className:"bg-gray-600 text-white py-2 px-4 rounded-lg",children:"Add Experience"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Skills"}),s.skills.map((e,t)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Skill Name",value:e.skillName,onChange:l=>r(l,"skills",t,"skillName"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Proficiency",value:e.perfection,onChange:l=>r(l,"skills",t,"perfection"),className:"w-full border border-gray-400 rounded-lg p-2"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("skills"),className:"bg-gray-600 text-white py-2 px-4 rounded-lg",children:"Add Skill"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Social Profiles"}),s.socialProfiles.map((e,t)=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Platform Name",value:e.platformName,onChange:l=>r(l,"socialProfiles",t,"platformName"),className:"w-full border border-gray-400 rounded-lg p-2"}),a.jsx("input",{type:"text",placeholder:"Profile Link",value:e.profileLink,onChange:l=>r(l,"socialProfiles",t,"profileLink"),className:"w-full border border-gray-400 rounded-lg p-2"})]},t)),a.jsx("button",{type:"button",onClick:()=>i("socialProfiles"),className:"bg-gray-600 text-white py-2 px-4 rounded-lg",children:"Add Social Profile"}),a.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded-lg",children:"Submit CV"})]})]})})})};export{j as default};
